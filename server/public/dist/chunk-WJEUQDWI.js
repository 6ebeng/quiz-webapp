import{a as V}from"./chunk-CWH6PA5D.js";import{$ as h,A as $,Aa as oe,Ca as re,Cb as be,D as f,Da as se,E as g,H as J,Ka as ae,La as k,Ma as b,Na as T,Oa as le,Pa as ue,Q as X,Qa as ce,R as Y,S as r,V as _,Va as me,Xa as de,Y as z,Ya as w,Z as M,_a as B,ab as R,ba as l,bb as F,cb as pe,da as o,db as I,ea as s,eb as he,fa as D,ga as q,gb as fe,ha as v,hb as ge,i as C,ia as c,j as W,jb as ve,k as G,lb as xe,mb as _e,na as Z,oa as a,pa as d,qa as y,ra as L,sa as ee,ta as te,ua as ie,va as E,wa as x,x as K,xa as ne,y as O,ya as S,yb as ze,za as P}from"./chunk-CLOBPWEO.js";var Le=(t,m)=>({"border-color":t,"background-color":m}),Ee=t=>({overlay:t}),Pe=t=>[t],ke=t=>({"background-image":t}),Te=t=>({"background-color":t}),Re=t=>({"quiz-main-details-popup":t}),Fe=t=>({color:t});function Ve(t,m){if(t&1){let e=q();o(0,"li",19)(1,"a",20),v("mouseover",function(){let i=f(e),u=i.$implicit,p=i.index,Oe=c();return g(Oe.setStyle(u,p))})("mouseout",function(){let i=f(e).$implicit,u=c();return g(u.resetStyle(i))})("click",function(){let i=f(e).$implicit,u=c();return g(u.setFilterValues(i))}),a(2),s()()}if(t&2){let e=m.$implicit,n=m.index,i=c();r(),l("ngStyle",ne(2,Le,e.color,e.selected||e.color==i.hoverColor&&n==i.hoverIndex?e.color:"")),r(),y("",e.name," ")}}function Ae(t,m){t&1&&(o(0,"div",38)(1,"p"),a(2,"Sign in to take a quiz"),s()())}function je(t,m){if(t&1&&(o(0,"p",39),a(1),s()),t&2){let e=c().$implicit;r(),d(e.description)}}function Ne(t,m){if(t&1&&(o(0,"p",40),a(1,"Kweez"),s()),t&2){let e=c().$implicit;l("ngStyle",x(1,Fe,e.color))}}function He(t,m){if(t&1){let e=q();o(0,"div",21)(1,"article",22),v("mouseenter",function(){let i=f(e).$implicit,u=c();return g(u.showDescription(i))})("mouseleave",function(){let i=f(e).$implicit,u=c();return g(u.hideDescription(i))})("click",function(){let i=f(e).$implicit,u=c();return g(u.toggleOverlay(i))})("mousemove",function(i){f(e);let u=c();return g(u.hideOverlay(i))}),h(2,Ae,3,0,"div",23),o(3,"section",24),S(4,"async"),o(5,"header",25)(6,"div",26)(7,"div",27)(8,"p",28),a(9),S(10,"async"),s()(),o(11,"div",29)(12,"p",30),S(13,"async"),a(14),s()()(),o(15,"div",31)(16,"h2",32),a(17),s()()(),o(18,"div",33),h(19,je,2,1,"p",34)(20,Ne,2,3,"ng-template",null,0,se),s()(),o(22,"footer",35)(23,"p",36),a(24,"Time limit: "),o(25,"span"),a(26),s()(),o(27,"p",37),a(28,"Last updated: "),o(29,"span"),a(30),S(31,"date"),s()()()()()}if(t&2){let e=m.$implicit,n=Z(21),i=c();r(),l("ngClass",x(22,Ee,e.showOverlay))("routerLink",i.authenticated?x(24,Pe,e.id):null),r(),l("ngIf",e.showOverlay),r(),l("ngStyle",x(26,ke,"url("+P(4,13,i.getCategoryImage(e.categoryId))+")")),r(6),y("Questions: ",P(10,15,i.getQuestionsCount(e.id)),""),r(3),l("ngStyle",x(28,Te,P(13,17,i.getCategoryColor(e.categoryId)))),r(2),d(e.categoryName),r(3),d(e.title),r(),l("ngClass",x(30,Re,e.showDescription)),r(),l("ngIf",e.showDescription)("ngIfElse",n),r(7),d(e.timelimit?e.timelimit+"min(s)":"-"),r(4),d(oe(31,19,e.timestamp,"d.M.yyyy."))}}var Ce=(()=>{class t{constructor(e,n){this.authService=e,this.quizService=n,this.hoverIndex=-1,this.hoverColor="",this.filterValues=[],this.query="",this.authenticated=!1,this.description=!1,this.user=new R,this.userSubscription=null,this.quizzes=[],this.quizzesSubscription=null,this.quizCategories=[],this.quizCategoriesSubscription=null,this.authSubscription=null}ngOnInit(){this.authSubscription=this.authService.authStatus.subscribe(e=>{this.authenticated=e}),this.quizzesSubscription=this.quizService.getQuizzes().subscribe(e=>{this.quizzes=e}),this.quizCategoriesSubscription=this.quizService.getQuizCategories().subscribe(e=>{this.quizCategories=e})}getQuestionsCount(e){return this.quizService.assignedQuestionsSubject.pipe(C(n=>n?n.filter(i=>i.quizId===e).length:0))}getCategoryColor(e){return this.quizService.getQuizCategory(e).pipe(C(n=>n?.color?n.color:"silver"))}getCategoryImage(e){return this.quizService.getQuizCategory(e).pipe(C(n=>{let i=F.API_URL+"/assets/img/";return n?.image?i+n.image:""}))}setStyle(e,n){e.color&&(this.hoverColor=e.color,this.hoverIndex=n)}resetStyle(e){e.selected||(this.hoverColor="",this.hoverIndex=-1)}setFilterValues(e){let n=this.filterValues.indexOf(e.id);n==-1?(e.selected=!0,this.filterValues.push(e.id)):(e.selected=!1,this.filterValues.splice(n,1)),this.filterValues=[...this.filterValues]}showDescription(e){e.showOverlay||(e.showDescription=!0,setTimeout(()=>{e.showDescription=!1},5e3))}hideDescription(e){e.showDescription&&(e.showDescription=!1)}toggleOverlay(e){this.authenticated||(e.showOverlay=!e.showOverlay),e.showDescription=!1}hideOverlay(e){this.quizzes.forEach(n=>{n.showOverlay&&(n.showOverlay=!1)})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.quizzesSubscription&&this.quizzesSubscription.unsubscribe(),this.quizCategoriesSubscription&&this.quizCategoriesSubscription.unsubscribe(),this.authSubscription&&this.authSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(_(I),_(V))}}static{this.\u0275cmp=z({type:t,selectors:[["app-quiz-dashboard"]],hostBindings:function(n,i){n&1&&v("mouseleave",function(p){return i.hideOverlay(p)})},standalone:!1,decls:23,vars:9,consts:[["kweez",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-end","me-4"],[1,"navbar-nav"],[1,"d-flex","justify-content-end"],["class","nav-item ms-2",4,"ngFor","ngForOf"],[1,"nav-item","ms-5"],["for","search",1,"me-2"],["type","text","id","search",3,"ngModelChange","ngModel"],[1,"row","justify-content-md-center","mt-5","mb-3"],[1,"col-md-9"],[1,"page-header"],[1,"page-header-title","text-center"],[1,"page-header-details","text-right"],[1,"row","justify-content-md-center"],[1,"col-md-10"],[1,"row","justify-content-md-start"],["class","col-md-4 mb-4 gx-5 gy-md-4 gx-md-5",4,"ngFor","ngForOf"],[1,"nav-item","ms-2"],[1,"nav-link",3,"mouseover","mouseout","click","ngStyle"],[1,"col-md-4","mb-4","gx-5","gy-md-4","gx-md-5"],[1,"quiz","h-100",3,"mouseenter","mouseleave","click","mousemove","ngClass","routerLink"],["class","quiz-overlay-login ms-auto",4,"ngIf"],[1,"quiz-main","d-flex","flex-column","justify-content-start",3,"ngStyle"],[1,"quiz-main-header"],[1,"d-flex","justify-content-between","mt-2","mx-2"],[1,"col-4","col-md-6","col-xl-4"],[1,"quiz-main-header-questions","text-center"],[1,"col-4","col-md-4","col-xl-4"],[1,"quiz-main-header-category","text-center",3,"ngStyle"],[1,"d-flex","justify-content-start","mx-2"],[1,"quiz-main-header-title","mt-2"],[1,"quiz-main-details","mt-5","mx-4",3,"ngClass"],["class","quiz-main-details-description py-1 px-2",4,"ngIf","ngIfElse"],[1,"quiz-footer","justify-content-between","d-flex","pt-2","p-1"],[1,"time-limit","m-0"],[1,"timestamp","m-0"],[1,"quiz-overlay-login","ms-auto"],[1,"quiz-main-details-description","py-1","px-2"],[1,"quiz-main-details-title","text-center","p-1",3,"ngStyle"]],template:function(n,i){n&1&&(o(0,"nav",1)(1,"div",2)(2,"div",3)(3,"ul",4)(4,"div",5),h(5,Ve,3,5,"li",6),s(),o(6,"li",7)(7,"label",8),a(8,"Search:"),s(),o(9,"input",9),ie("ngModelChange",function(p){return te(i.query,p)||(i.query=p),p}),s()()()()()(),o(10,"div",2)(11,"div",10)(12,"div",11)(13,"div",12)(14,"h1",13),a(15,"Test your knowledge with quizzes from our collection"),s(),o(16,"p",14),a(17),s()()()(),o(18,"div",15)(19,"div",16)(20,"div",17),h(21,He,32,32,"div",18),S(22,"filter"),s()()()()),n&2&&(r(5),l("ngForOf",i.quizCategories),r(4),ee("ngModel",i.query),r(8),y("Quizzes in collection: ",i.quizzes.length,""),r(4),l("ngForOf",re(22,4,i.quizzes,"categoryId",i.filterValues,i.query)))},dependencies:[ae,k,b,T,w,he,fe,xe,le,ue,ze],styles:['.page-header-title[_ngcontent-%COMP%]{font-family:Indie Flower,cursive;font-size:1.6em}.nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1px 8px;border-width:1px;border-style:solid;border-radius:5px;cursor:pointer}.quiz[_ngcontent-%COMP%]{cursor:pointer}.quiz-main[_ngcontent-%COMP%]{min-height:280px;border-top-left-radius:10px;border-top-right-radius:10px;background-size:cover}.quiz-main-header-title[_ngcontent-%COMP%]{border-radius:10px}.quiz-main-header-questions[_ngcontent-%COMP%]{background-color:#9696964d;border-radius:5px}.quiz-main-header-category[_ngcontent-%COMP%]{background-color:silver;border-radius:5px}.quiz-main-details[_ngcontent-%COMP%]{border-radius:5px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;word-break:break-word;text-overflow:ellipsis}.quiz-main-details-popup[_ngcontent-%COMP%]{background-color:#c8c8c899;border-right:1px solid rgba(160,160,160,.8);border-bottom:1px solid rgba(160,160,160,.8)}.quiz-main-details-description[_ngcontent-%COMP%]{margin:0;color:#000000e6}.quiz-main-details-title[_ngcontent-%COMP%]{font-family:Seymour One,sans-serif;font-size:2em;transform:rotate(-5deg)}.quiz-footer[_ngcontent-%COMP%]{background-color:silver;border-bottom-left-radius:5px;border-bottom-right-radius:5px}p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#696969}label[_ngcontent-%COMP%]{color:#a9a9a9}input[type=text][_ngcontent-%COMP%]{text-indent:5px;width:150px;border:1px solid silver;border-radius:5px;background-color:#faebd7}.overlay[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;height:100%;border-radius:10px 10px 5px 5px}.overlay[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;z-index:1;background-color:#ffffff80;border-radius:10px 10px 5px 5px}.quiz-overlay-login[_ngcontent-%COMP%]{position:absolute;width:50%;top:50%;left:50%;color:#fff;border-radius:5px;background-color:#373737;transform:translate(-50%,-50%);z-index:2}.quiz-overlay-login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:5px 0;text-align:center;font-size:1em}@media (max-width: 1200px){.quiz-details[_ngcontent-%COMP%]{-webkit-line-clamp:3}.quiz-main-details-title[_ngcontent-%COMP%]{font-size:1.6em}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:0 1em}.quiz-container[_ngcontent-%COMP%]{margin:0}.quiz-details[_ngcontent-%COMP%]{-webkit-line-clamp:3}.quiz-main-details-title[_ngcontent-%COMP%]{font-size:2.2em}}']})}}return t})();var j=class{constructor(){this.id="",this.title="",this.description="",this.timelimit=0,this.timestamp=new Date,this.categoryId="",this.categoryName="",this.color="",this.showDescription=!1,this.showOverlay=!1}};var N=class{constructor(){this.id="",this.text="",this.options=[],this.answer="",this.timestamp=new Date,this.toggled=!1,this.openAi=!1}};var H=class{constructor(){this.id="",this.userId="",this.quizId="",this.score=0,this.totalQuestions=0,this.questionsAnswered=0,this.timestamp=new Date}};var $e=()=>["../"];function Be(t,m){if(t&1){let e=q();o(0,"div",11)(1,"div",22)(2,"input",23),v("change",function(){let i=f(e).$implicit,u=c();return g(u.onAnswerChange(i))}),s()(),o(3,"div",24)(4,"label",25),a(5),s()()()}if(t&2){let e=m.$implicit,n=m.index;r(2),l("name","option")("id","option"+n)("value",e),r(2),l("for","option"+n),r(),d(e)}}function Ue(t,m){t&1&&(o(0,"span",26),a(1,"waiting..."),s())}var ye=(()=>{class t{constructor(e){this.dataService=e,this.answerEvent=new J,this.waiting=!1,this.hint="",this.openAiImg=F.API_URL+"/assets/img/openai.png"}onAnswerChange(e){this.selectedAnswer=e}onAnswer(){this.selectedAnswer&&this.answerEvent.emit(this.selectedAnswer),this.hint=""}generateHint(){this.waiting=!this.waiting,this.dataService.generateHint({question:this.question?.text}).subscribe({next:e=>{console.log("Generated: ",e),e.status==="OK"&&e.result&&(this.hint=e.result.hint,this.waiting=!this.waiting,console.log(this.hint))},error:e=>{console.log(e)}})}static{this.\u0275fac=function(n){return new(n||t)(_(pe))}}static{this.\u0275cmp=z({type:t,selectors:[["app-quiz-question"]],inputs:{question:"question",questionsLength:"questionsLength",questionIndex:"questionIndex"},outputs:{answerEvent:"answerEvent"},standalone:!1,decls:31,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-around"],[1,"col-7","offset-2"],[1,"card-title","question-text","text-center"],[1,"col-1"],[1,"card-title","question-text","text-end"],[1,"card-body","text-center"],[1,"d-flex","flex-column","justify-content-center"],["class","row",4,"ngFor","ngForOf"],[1,"row","hint","mt-4"],[1,"row"],[1,"col-6","d-flex","align-items-center","pe-0"],[1,"col-6","text-center"],["class","waiting",4,"ngIf"],[1,"col-6","text-end"],[1,"btn",3,"click"],[1,"openai-icon",3,"src"],[1,"col-6","d-flex"],[1,"col-6","text-start"],["type","button",1,"btn",3,"click"],["type","button",1,"btn",3,"routerLink"],[1,"col-6","text-end","pe-4"],["type","radio",1,"form-check-input",3,"change","name","id","value"],[1,"col-6","text-start","ps-0"],[1,"form-check-label",3,"for"],[1,"waiting"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),a(5),s()(),o(6,"div",5)(7,"p",6),a(8),s()()()(),o(9,"div",7)(10,"form")(11,"div",8),h(12,Be,6,5,"div",9),o(13,"div",10)(14,"label"),a(15),s()(),o(16,"div",11)(17,"div",12)(18,"div",13),h(19,Ue,2,0,"span",14),s(),o(20,"div",15)(21,"button",16),v("click",function(){return i.generateHint()}),D(22,"img",17),a(23," Hint? "),s()()(),o(24,"div",18)(25,"div",19)(26,"button",20),v("click",function(){return i.onAnswer()}),a(27,"Confirm"),s()(),o(28,"div",15)(29,"button",21),a(30,"Quit"),s()()()()()()()()),n&2&&(r(5),d(i.question==null?null:i.question.text),r(3),L("",i.questionIndex+1,"/ ",i.questionsLength,""),r(4),l("ngForOf",i.question==null?null:i.question.options),r(3),d(i.hint),r(4),l("ngIf",i.waiting),r(3),l("src",i.openAiImg,X),r(7),l("routerLink",E(8,$e)))},dependencies:[k,b,w,_e,ge,ve],styles:[".question-text[_ngcontent-%COMP%]{font-size:1em}input[type=radio][_ngcontent-%COMP%]{border:2px solid lightgray}input[type=radio][_ngcontent-%COMP%]:checked{color:silver;background-color:silver;border:1px solid grey}.card-body[_ngcontent-%COMP%]{border-right:1px solid rgb(230,230,230);border-bottom:1px solid rgb(220,220,220)}.hint[_ngcontent-%COMP%]{color:silver;min-height:50px}.btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:.8em;border-color:silver}.btn[_ngcontent-%COMP%]:focus{outline:none;border-color:silver}.btn[_ngcontent-%COMP%]:hover{background-color:#dcdcdc}.openai-icon[_ngcontent-%COMP%]{max-width:15px;max-height:15px}"]})}}return t})();var Ge=()=>["../"];function Ke(t,m){if(t&1&&(o(0,"div",4)(1,"div",5)(2,"p"),a(3,"Time left: "),s()(),o(4,"div",6)(5,"p",7),a(6),s()()()),t&2){let e=c();r(6),y("",e.finalTime," seconds")}}var Se=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=z({type:t,selectors:[["app-quiz-results"]],inputs:{questionsLength:"questionsLength",quizResults:"quizResults",finalTime:"finalTime",timeLimit:"timeLimit"},standalone:!1,decls:22,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"card-title","question-text","text-center"],[1,"card-body","text-center"],[1,"row"],[1,"col-6","text-end","pe-2"],[1,"col-6","text-start"],[1,"result"],["class","row",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-confirm","mt-2",3,"routerLink"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"p",2),a(3,"Quiz Results"),s()(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"p"),a(8,"Questions: "),s()(),o(9,"div",6)(10,"p",7),a(11),s()()(),o(12,"div",4)(13,"div",5)(14,"p"),a(15,"Score: "),s()(),o(16,"div",6)(17,"p",7),a(18),s()()(),h(19,Ke,7,1,"div",8),o(20,"button",9),a(21,"Ok"),s()()()),n&2&&(r(11),d(i.questionsLength),r(7),L("",i.quizResults==null?null:i.quizResults.score,"/ ",i.questionsLength,""),r(),l("ngIf",i.timeLimit),r(),l("routerLink",E(5,Ge)))},dependencies:[b,w],styles:[".btn[_ngcontent-%COMP%]{font-size:.9em;border:1px solid silver;background-color:#f5f5f5}.btn[_ngcontent-%COMP%]:hover{background-color:#dcdcdc}.row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.result[_ngcontent-%COMP%]{color:gray}.card-body[_ngcontent-%COMP%]{border-right:1px solid rgb(230,230,230);border-bottom:1px solid rgb(220,220,220)}"]})}}return t})();var Xe=t=>({visibility:t}),Ye=t=>({color:t});function Ze(t,m){if(t&1&&(o(0,"h1",11),a(1),s()),t&2){let e=c();r(),d(e.quiz.title)}}function et(t,m){t&1&&(o(0,"p",12),a(1,"The time for this quiz has expired."),s())}function tt(t,m){if(t&1){let e=q();o(0,"app-quiz-question",13),v("answerEvent",function(i){f(e);let u=c();return g(u.onAnswer(i))}),s()}if(t&2){let e=c();l("question",e.quizQuestions[e.questionIndex])("questionIndex",e.questionIndex)("questionsLength",e.quizQuestions.length)}}function it(t,m){if(t&1&&D(0,"app-quiz-results",14),t&2){let e=c();l("quizResults",e.quizResults)("questionsLength",e.quizQuestions.length)("finalTime",e.finalTime)("timeLimit",!!e.quiz.timelimit)}}var we=(()=>{class t{constructor(e,n,i){this.activatedRoute=e,this.quizService=n,this.authService=i,this.id="",this.quiz=new j,this.quizSubscription=null,this.quizQuestions=[],this.questionsSubscription=null,this.user=new R,this.userSubscription=null,this.timeLeft=0,this.finalTime=0,this.questionIndex=0,this.question=new N,this.quizResults=new H,this.quizCompleted=!1}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.id=e.quizid}),this.quizSubscription=this.quizService.getQuiz(this.id).subscribe({next:e=>{e&&(this.quiz=e,this.timeLeft=this.quiz.timelimit*60,this.quizResults.quizId=this.quiz.id);let n=sessionStorage.getItem("timeLeft");n&&(this.timeLeft=parseInt(n))},error:e=>{console.log(e)}}),this.questionsSubscription=W([this.quizService.getAssignedQuestions(),this.quizService.getAllQuestions()]).pipe(G(([e,n])=>{let i=e.filter(p=>p.quizId===this.id).map(p=>p.questionId),u=n.filter(p=>i.includes(p.id));return this.quizQuestions=u,this.quizResults.totalQuestions=u.length,this.timeLeft&&this.startTimer(),[]})).subscribe({error:e=>{console.log(e)}}),this.userSubscription=this.authService.getUser().subscribe(e=>{this.user=e,this.quizResults.userId=this.user.id})}startTimer(){this.timer=setInterval(()=>{this.timeLeft>0?(this.timeLeft--,sessionStorage.setItem("timeLeft",this.timeLeft.toString())):this.quizCompletedActions()},1e3)}formatTime(e){let n=Math.floor(e/60),i=e%60;return`${this.padNumber(n)}:${this.padNumber(i)}`}padNumber(e){return e<10?`0${e}`:`${e}`}unloadHandler(e){sessionStorage.setItem("timeLeft",this.timeLeft.toString())}onAnswer(e){this.question=this.quizQuestions[this.questionIndex],e===this.question?.answer&&this.quizResults.score++,this.questionIndex<this.quizQuestions.length-1?this.questionIndex++:(this.quizResults.questionsAnswered=this.quizResults.totalQuestions,this.quizService.addQuizResults(this.quizResults),this.quizCompletedActions())}quizCompletedActions(){this.quizCompleted=!0,this.quiz.timelimit&&(this.finalTime=this.timeLeft,this.timeLeft=0,sessionStorage.setItem("timeLeft","0"),clearInterval(this.timer))}ngOnDestroy(){this.quizSubscription&&this.quizSubscription.unsubscribe(),this.questionsSubscription&&this.questionsSubscription.unsubscribe(),this.userSubscription&&this.userSubscription.unsubscribe(),clearInterval(this.timer),sessionStorage.removeItem("timeLeft")}static{this.\u0275fac=function(n){return new(n||t)(_(me),_(V),_(I))}}static{this.\u0275cmp=z({type:t,selectors:[["app-quiz-detail"]],hostBindings:function(n,i){n&1&&v("beforeunload",function(p){return i.unloadHandler(p)},!1,Y)},standalone:!1,decls:15,vars:13,consts:[[1,"container-fluid"],[1,"row","justify-content-center","mt-3"],[1,"col-6","col-md-4","offset-1","offset-md-3","text-center"],["class","quiz-title",4,"ngIf"],["class","expired mt-4 mb-0",4,"ngIf"],[1,"col-4","col-md-3"],[1,"info-display","ms-md-4",3,"ngStyle"],[3,"ngStyle"],[1,"row","justify-content-center","my-3"],["class","quiz-container col-10 col-md-6 col-xxl-4",3,"question","questionIndex","questionsLength","answerEvent",4,"ngIf"],["class","quiz-container col-10 col-md-6 col-xxl-4",3,"quizResults","questionsLength","finalTime","timeLimit",4,"ngIf"],[1,"quiz-title"],[1,"expired","mt-4","mb-0"],[1,"quiz-container","col-10","col-md-6","col-xxl-4",3,"answerEvent","question","questionIndex","questionsLength"],[1,"quiz-container","col-10","col-md-6","col-xxl-4",3,"quizResults","questionsLength","finalTime","timeLimit"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),h(3,Ze,2,1,"h1",3)(4,et,2,0,"p",4),s(),o(5,"div",5)(6,"div",6)(7,"p"),a(8),o(9,"span",7),a(10),s(),a(11),s()()()(),o(12,"div",8),h(13,tt,1,3,"app-quiz-question",9)(14,it,1,4,"app-quiz-results",10),s()()),n&2&&(r(3),l("ngIf",!i.quizCompleted&&(i.timeLeft||!i.quiz.timelimit)),r(),l("ngIf",!i.quizCompleted&&!i.timeLeft&&i.quiz.timelimit),r(2),l("ngStyle",x(9,Xe,!i.quizCompleted&&i.timeLeft?"visible":"hidden")),r(2),d(i.quiz.timelimit?"Time left: ":""),r(),l("ngStyle",x(11,Ye,i.timeLeft<10?"red":"initial")),r(),d(i.quiz.timelimit?i.formatTime(i.timeLeft):""),r(),d(i.quiz.timelimit?"":"No time limit: "),r(2),l("ngIf",!i.quizCompleted&&(i.timeLeft||!i.quiz.timelimit)),r(),l("ngIf",i.quizCompleted))},dependencies:[b,T,ye,Se],styles:[".quiz-title[_ngcontent-%COMP%]{font-size:1.5em}.info-display[_ngcontent-%COMP%]{width:fit-content;border:1px solid lightgrey;border-radius:5px}.info-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;padding:5px}.expired[_ngcontent-%COMP%]{letter-spacing:.5px}@media (min-width: 1620px){.quiz-container[_ngcontent-%COMP%]{max-width:550px}}"]})}}return t})();var Ie=(()=>{class t{constructor(e,n){this.authService=e,this.router=n}canActivate(e,n){return this.authService.isAuthenticated()?!0:this.authService.isExpired()?(this.router.navigate(["/auth/login"]),!1):this.authService.whoAmI().pipe(C(i=>i.status==="OK"?!0:(this.router.navigate(["/auth/login"]),!1)))}static{this.\u0275fac=function(n){return new(n||t)($(I),$(de))}}static{this.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nt=[{path:"",component:Ce},{path:":quizid",component:we,canActivate:[Ie]}],Qe=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=O({imports:[B.forChild(nt),B]})}}return t})();var Nt=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=M({type:t})}static{this.\u0275inj=O({imports:[ce,Qe,be]})}}return t})();export{Ie as a,Nt as b};

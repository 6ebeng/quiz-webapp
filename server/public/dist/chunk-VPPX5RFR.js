import{a as D}from"./chunk-6UJPAVCL.js";import{$ as d,Cb as q,La as E,Ma as M,Qa as $,S as r,V as v,Y as F,Ya as I,Z as S,_a as V,ba as a,c as G,da as n,db as O,ea as i,eb as P,fa as _,fb as p,gb as N,ha as w,hb as R,ia as u,kb as x,mb as L,oa as s,ob as T,pa as g,qb as j,va as b,xb as k,y as h}from"./chunk-3B37LIQD.js";var Y=()=>["../register"];function Z(e,m){if(e&1&&(n(0,"li",18),s(1),i()),e&2){let t=m.$implicit;r(),g(t)}}function ee(e,m){if(e&1&&(n(0,"ul"),d(1,Z,2,1,"li",17),i()),e&2){let t=u();r(),a("ngForOf",t.getErrorMessages(t.loginForm.get("username")))}}function te(e,m){if(e&1&&(n(0,"li",18),s(1),i()),e&2){let t=m.$implicit;r(),g(t)}}function ie(e,m){if(e&1&&(n(0,"ul"),d(1,te,2,1,"li",17),i()),e&2){let t=u();r(),a("ngForOf",t.getErrorMessages(t.loginForm.get("password")))}}function ne(e,m){if(e&1&&(n(0,"div",19),s(1),i()),e&2){let t=u();r(),g(t.message)}}var z=(()=>{class e{constructor(t,l,o){this.authService=t,this.fb=l,this.validatorService=o,this.message=""}ngOnInit(){this.loginForm=this.fb.group({username:new x("",p.required),password:new x("",p.required)}),this.authService.msgEmitter.subscribe(t=>{this.message=t})}onLogin(){this.loginForm.valid&&this.authService.loginUser({username:this.loginForm.value.username,password:this.loginForm.value.password})}getErrorMessages(t,l){return this.validatorService.generateErrorMsgs(t,l)}ngOnDestroy(){}static{this.\u0275fac=function(l){return new(l||e)(v(O),v(k),v(D))}}static{this.\u0275cmp=F({type:e,selectors:[["app-login"]],standalone:!1,decls:29,vars:7,consts:[[1,"container-fluid"],[1,"row","mt-5","justify-content-center"],[1,"col-md-3","col-xs-12","text-md-end","text-start"],[1,"pe-5"],[1,"col-md-3","col-xs-12"],[3,"submit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"custom-control","rounded"],[4,"ngIf"],[1,"form-group","mt-2"],["for","password"],["type","password","id","password","formControlName","password",1,"custom-control","rounded"],["type","submit",1,"btn","btn-sm","btn-login","mt-2",3,"disabled"],["class","form-message my-2",4,"ngIf"],[1,"row","mt-5","justify-content-center","p-0"],["type","button",1,"btn","btn-sm","btn-register",3,"routerLink"],["class","form-invalid",4,"ngFor","ngForOf"],[1,"form-invalid"],[1,"form-message","my-2"]],template:function(l,o){if(l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4,"Sign in to your account:"),i()(),n(5,"div",4)(6,"form",5),w("submit",function(){return o.onLogin()}),n(7,"fieldset",6)(8,"label",7),s(9,"Username: "),i(),_(10,"br")(11,"input",8),d(12,ee,2,1,"ul",9),i(),n(13,"fieldset",10)(14,"label",11),s(15,"Password: "),i(),_(16,"br")(17,"input",12),d(18,ie,2,1,"ul",9),i(),n(19,"button",13),s(20,"Sign in"),i(),d(21,ne,2,1,"div",14),i()(),n(22,"div",15)(23,"div",2)(24,"p",3),s(25,"Need to create an account?"),i()(),n(26,"div",4)(27,"button",16),s(28,"Register"),i()()()()()),l&2){let c,f;r(6),a("formGroup",o.loginForm),r(6),a("ngIf",((c=o.loginForm.get("username"))==null?null:c.invalid)&&((c=o.loginForm.get("username"))==null?null:c.dirty)),r(6),a("ngIf",((f=o.loginForm.get("password"))==null?null:f.invalid)&&((f=o.loginForm.get("password"))==null?null:f.dirty)),r(),a("disabled",!o.loginForm.valid),r(2),a("ngIf",o.message),r(6),a("routerLink",b(6,Y))}},dependencies:[E,M,I,L,P,N,R,T,j],styles:[".btn[_ngcontent-%COMP%]{font-size:.9em;border:1px solid silver;background-color:#f5f5f5}.btn[_ngcontent-%COMP%]:hover{background-color:#dcdcdc}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{margin:0;font-size:14px;padding:2px 4px}input.custom-control[_ngcontent-%COMP%]{border-color:silver;border:1px solid silver;box-shadow:0 0 1px silver}.form-invalid[_ngcontent-%COMP%], .form-message[_ngcontent-%COMP%]{color:#eb0000}.info-text[_ngcontent-%COMP%]{font-size:1.2em}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}"]})}}return e})();var re=()=>["../login"],U=()=>["at least one number","at least one special character"];function oe(e,m){if(e&1&&(n(0,"li",22),s(1),i()),e&2){let t=m.$implicit;r(),g(t)}}function le(e,m){if(e&1&&(n(0,"ul"),d(1,oe,2,1,"li",21),i()),e&2){let t=u();r(),a("ngForOf",t.getErrorMessages(t.registerForm.get("username")))}}function se(e,m){if(e&1&&(n(0,"li",22),s(1),i()),e&2){let t=m.$implicit;r(),g(t)}}function ae(e,m){if(e&1&&(n(0,"ul"),d(1,se,2,1,"li",21),i()),e&2){let t=u();r(),a("ngForOf",t.getErrorMessages(t.registerForm.get("password"),b(1,U)))}}function me(e,m){if(e&1&&(n(0,"li",22),s(1),i()),e&2){let t=m.$implicit;r(),g(t)}}function de(e,m){if(e&1&&(n(0,"ul"),d(1,me,2,1,"li",21),i()),e&2){let t=u();r(),a("ngForOf",t.getErrorMessages(t.registerForm.get("repeatedPassword"),b(1,U)))}}function pe(e,m){if(e&1&&(n(0,"li",22),s(1),i()),e&2){let t=m.$implicit;r(),g(t)}}function ce(e,m){if(e&1&&(n(0,"ul"),d(1,pe,2,1,"li",21),i()),e&2){let t=u();r(),a("ngForOf",t.getErrorMessages(t.registerForm.get("email")))}}function ue(e,m){if(e&1&&(n(0,"div",23),s(1),i()),e&2){let t=u();r(),g(t.message)}}var B=(()=>{class e{constructor(t,l,o){this.authService=t,this.fb=l,this.validatorService=o,this.message=""}ngOnInit(){let t=/^(?=.*\d)(?=.*[@_!#$%^&*()\-+={}[\]:;<>,.?~\\/])/;this.registerForm=this.fb.group({username:new x("",[p.required,p.minLength(3)]),password:new x("",[p.required,p.minLength(8),p.pattern(t)]),repeatedPassword:new x("",[p.required,p.minLength(8),p.pattern(t)]),email:new x("",[p.required,p.email])},{validators:[this.validatorService.matchValidator("password","repeatedPassword")]}),this.authService.msgEmitter.subscribe(l=>{this.message=l})}getErrorMessages(t,l){return this.validatorService.generateErrorMsgs(t,l)}onRegister(){let o=this.registerForm.value,{repeatedPassword:t}=o,l=G(o,["repeatedPassword"]);l.role="user",this.authService.registerUser(l)}static{this.\u0275fac=function(l){return new(l||e)(v(O),v(k),v(D))}}static{this.\u0275cmp=F({type:e,selectors:[["app-register"]],standalone:!1,decls:43,vars:9,consts:[[1,"container-fluid"],[1,"row","mt-5","justify-content-center"],[1,"col-md-3","col-xs-12","text-md-end","text-start"],[1,"pe-5"],[1,"col-md-3","col-xs-12"],[3,"submit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"custom-control","rounded"],[4,"ngIf"],[1,"form-group","mt-2"],["for","password"],["type","password","id","password","formControlName","password",1,"custom-control","rounded"],["for","repeatedPassword"],["type","password","id","repeatedPassword","formControlName","repeatedPassword",1,"custom-control","rounded"],["for","email"],["type","email","id","email","formControlName","email",1,"custom-control","rounded"],["type","submit",1,"btn","btn-sm","btn-login","mt-2",3,"disabled"],["class","form-message my-2",4,"ngIf"],[1,"row","mt-5","justify-content-center","p-0"],["type","button",1,"btn","btn-sm","btn-register",3,"routerLink"],["class","form-invalid",4,"ngFor","ngForOf"],[1,"form-invalid"],[1,"form-message","my-2"]],template:function(l,o){if(l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4,"Register a new account:"),i()(),n(5,"div",4)(6,"form",5),w("submit",function(){return o.onRegister()}),n(7,"fieldset",6)(8,"label",7),s(9,"Username: "),i(),_(10,"br")(11,"input",8)(12,"br"),d(13,le,2,1,"ul",9),i(),n(14,"fieldset",10)(15,"label",11),s(16,"Password: "),i(),_(17,"br")(18,"input",12)(19,"br"),d(20,ae,2,2,"ul",9),i(),n(21,"fieldset",10)(22,"label",13),s(23,"Repeat password: "),i(),_(24,"br")(25,"input",14),d(26,de,2,2,"ul",9),i(),n(27,"fieldset",10)(28,"label",15),s(29,"E-mail: "),i(),_(30,"br")(31,"input",16),d(32,ce,2,1,"ul",9),i(),n(33,"button",17),s(34,"Register"),i(),d(35,ue,2,1,"div",18),i()()(),n(36,"div",19)(37,"div",2)(38,"p",3),s(39,"Already registered? Sign in"),i()(),n(40,"div",4)(41,"button",20),s(42,"Sign in"),i()()()()),l&2){let c,f,C,y;r(6),a("formGroup",o.registerForm),r(7),a("ngIf",((c=o.registerForm.get("username"))==null?null:c.invalid)&&((c=o.registerForm.get("username"))==null?null:c.dirty)),r(7),a("ngIf",((f=o.registerForm.get("password"))==null?null:f.invalid)&&((f=o.registerForm.get("password"))==null?null:f.dirty)),r(6),a("ngIf",((C=o.registerForm.get("repeatedPassword"))==null?null:C.invalid)&&((C=o.registerForm.get("repeatedPassword"))==null?null:C.dirty)),r(6),a("ngIf",((y=o.registerForm.get("email"))==null?null:y.invalid)&&((y=o.registerForm.get("email"))==null?null:y.dirty)),r(),a("disabled",!o.registerForm.valid),r(2),a("ngIf",o.message),r(6),a("routerLink",b(8,re))}},dependencies:[E,M,I,L,P,N,R,T,j],styles:[".btn[_ngcontent-%COMP%]{font-size:.9em;border:1px solid silver;background-color:#f5f5f5}.btn[_ngcontent-%COMP%]:hover{background-color:#dcdcdc}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{margin:0;font-size:14px;padding:2px 4px}input.custom-control[_ngcontent-%COMP%]{border-color:silver;border:1px solid silver;box-shadow:0 0 1px silver}.form-invalid[_ngcontent-%COMP%], .form-message[_ngcontent-%COMP%]{color:#eb0000}.info-text[_ngcontent-%COMP%]{font-size:1.2em}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}"]})}}return e})();var ge=[{path:"login",component:z},{path:"register",component:B}],H=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=h({imports:[V.forChild(ge),V]})}}return e})();var Ne=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=h({imports:[$,H,q]})}}return e})();export{Ne as a};
